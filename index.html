<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rune GDPS Demonlist</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: system-ui, -apple-system, sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        import React, { useState, useEffect } from 'react';
import { Play, Trophy, User, Menu, X, Plus, Edit2, Trash2, Save, MoveUp, MoveDown, Lock } from 'lucide-react';

const RuneDemonlist = () => {
  const [activeTab, setActiveTab] = useState('demons');
  const [menuOpen, setMenuOpen] = useState(false);
  const [selectedItem, setSelectedItem] = useState(null);
  const [isAdmin, setIsAdmin] = useState(false);
  const [loginAttempt, setLoginAttempt] = useState(false);
  const [email, setEmail] = useState('');
  const ADMIN_EMAIL = 'foxplay0707@gmail.com';
  
  const [demons, setDemons] = useState([]);
  const [challenges, setChallenges] = useState([]);
  const [players, setPlayers] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadData();
  }, []);

  const loadData = async () => {
    try {
      const [demonsResult, challengesResult, playersResult, adminResult] = await Promise.all([
        window.storage.get('rune-demons').catch(() => null),
        window.storage.get('rune-challenges').catch(() => null),
        window.storage.get('rune-players').catch(() => null),
        window.storage.get('rune-admin-session').catch(() => null)
      ]);

      setDemons(demonsResult?.value ? JSON.parse(demonsResult.value) : getDefaultDemons());
      setChallenges(challengesResult?.value ? JSON.parse(challengesResult.value) : getDefaultChallenges());
      setPlayers(playersResult?.value ? JSON.parse(playersResult.value) : getDefaultPlayers());
      
      if (adminResult?.value === ADMIN_EMAIL) {
        setIsAdmin(true);
      }
    } catch (error) {
      console.error('Error loading data:', error);
      setDemons(getDefaultDemons());
      setChallenges(getDefaultChallenges());
      setPlayers(getDefaultPlayers());
    }
    setLoading(false);
  };

  const handleAdminLogin = async () => {
    if (email.toLowerCase().trim() === ADMIN_EMAIL.toLowerCase()) {
      setIsAdmin(true);
      setLoginAttempt(false);
      try {
        await window.storage.set('rune-admin-session', ADMIN_EMAIL);
      } catch (error) {
        console.error('Error saving session:', error);
      }
    } else {
      alert('Доступ запрещён! Только администратор может войти в админ-панель.');
      setEmail('');
    }
  };

  const handleAdminLogout = async () => {
    setIsAdmin(false);
    setEmail('');
    try {
      await window.storage.delete('rune-admin-session');
    } catch (error) {
      console.error('Error deleting session:', error);
    }
  };

  const saveData = async () => {
    try {
      await Promise.all([
        window.storage.set('rune-demons', JSON.stringify(demons)),
        window.storage.set('rune-challenges', JSON.stringify(challenges)),
        window.storage.set('rune-players', JSON.stringify(players))
      ]);
      alert('Данные сохранены!');
    } catch (error) {
      console.error('Error saving data:', error);
      alert('Ошибка сохранения данных');
    }
  };

  const getDefaultDemons = () => [
    { id: 'D001', name: 'Rune Abyss', creator: 'RuneTeam', position: 1, cover: 'https://images.unsplash.com/photo-1614732414444-096e5f1122d5?w=400', video: 'https://youtube.com/watch?v=example1' },
    { id: 'D002', name: 'Divine Trials', creator: 'MysticGD', position: 2, cover: 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=400', video: 'https://youtube.com/watch?v=example2' },
    { id: 'D003', name: 'Infernal Gateway', creator: 'DarkSoul', position: 3, cover: 'https://images.unsplash.com/photo-1614730321146-b6fa6a46bcb4?w=400', video: 'https://youtube.com/watch?v=example3' }
  ];

  const getDefaultChallenges = () => [
    { id: 'C001', name: 'Rune Rush', creator: 'SpeedMaster', position: 1, cover: 'https://images.unsplash.com/photo-1511512578047-dfb367046420?w=400', video: 'https://youtube.com/watch?v=challenge1' },
    { id: 'C002', name: 'Precision Test', creator: 'ProGamer', position: 2, cover: 'https://images.unsplash.com/photo-1542751371-adc38448a05e?w=400', video: 'https://youtube.com/watch?v=challenge2' }
  ];

  const getDefaultPlayers = () => [
    { id: 'P001', name: 'RuneMaster', country: 'RU', position: 1 },
    { id: 'P002', name: 'DivinePro', country: 'US', position: 2 },
    { id: 'P003', name: 'InfernalKing', country: 'DE', position: 3 }
  ];

  const moveItem = (list, setList, index, direction) => {
    if ((direction === 'up' && index === 0) || (direction === 'down' && index === list.length - 1)) return;
    
    const newList = [...list];
    const targetIndex = direction === 'up' ? index - 1 : index + 1;
    [newList[index], newList[targetIndex]] = [newList[targetIndex], newList[index]];
    
    newList.forEach((item, idx) => {
      item.position = idx + 1;
    });
    
    setList(newList);
  };

  const deleteItem = (list, setList, id) => {
    if (confirm('Вы уверены, что хотите удалить этот элемент?')) {
      const newList = list.filter(item => item.id !== id);
      newList.forEach((item, idx) => {
        item.position = idx + 1;
      });
      setList(newList);
    }
  };

  if (loading) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-cyan-900 flex items-center justify-center">
        <div className="text-center">
          <div className="w-16 h-16 border-4 border-cyan-400 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
          <div className="text-cyan-300 text-xl">Загрузка...</div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-cyan-900 text-white">
      {/* Concentric circles background pattern */}
      <div className="fixed inset-0 opacity-5 pointer-events-none">
        {[...Array(8)].map((_, i) => (
          <div
            key={i}
            className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 border-2 border-cyan-400 rounded-full"
            style={{
              width: `${100 + i * 150}px`,
              height: `${100 + i * 150}px`,
            }}
          />
        ))}
      </div>

      {/* Header */}
      <header className="relative border-b border-cyan-800/30 backdrop-blur-md bg-slate-900/70 sticky top-0 z-50 shadow-lg shadow-cyan-900/20">
        <div className="container mx-auto px-4 py-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-4">
              <div className="relative">
                <img 
                  src="https://i.postimg.cc/nLgSgNJN/image.jpg" 
                  alt="Rune GDPS" 
                  className="w-14 h-14 rounded-full border-2 border-cyan-400 shadow-lg shadow-cyan-400/50"
                />
                <div className="absolute inset-0 rounded-full border-2 border-cyan-400 animate-ping opacity-20"></div>
              </div>
              <div>
                <h1 className="text-3xl font-bold bg-gradient-to-r from-cyan-300 via-blue-400 to-cyan-300 bg-clip-text text-transparent">
                  RUNE GDPS
                </h1>
                <p className="text-sm text-cyan-400 tracking-wider">DEMONLIST</p>
              </div>
            </div>
            
            <button 
              onClick={() => setMenuOpen(!menuOpen)}
              className="md:hidden p-2 hover:bg-cyan-800/20 rounded-lg transition border border-cyan-700/30"
            >
              {menuOpen ? <X size={24} /> : <Menu size={24} />}
            </button>

            <nav className="hidden md:flex gap-3 items-center">
              <button
                onClick={() => setActiveTab('demons')}
                className={`px-5 py-2.5 rounded-lg transition font-medium ${
                  activeTab === 'demons' 
                    ? 'bg-gradient-to-r from-blue-600 to-cyan-600 shadow-lg shadow-blue-600/50 border border-blue-400/30' 
                    : 'bg-slate-800/50 border border-slate-700/50 hover:bg-slate-700/50 hover:border-cyan-600/30'
                }`}
              >
                Демоны
              </button>
              <button
                onClick={() => setActiveTab('challenges')}
                className={`px-5 py-2.5 rounded-lg transition font-medium ${
                  activeTab === 'challenges' 
                    ? 'bg-gradient-to-r from-purple-600 to-pink-600 shadow-lg shadow-purple-600/50 border border-purple-400/30' 
                    : 'bg-slate-800/50 border border-slate-700/50 hover:bg-slate-700/50 hover:border-purple-600/30'
                }`}
              >
                Челленджи
              </button>
              <button
                onClick={() => setActiveTab('players')}
                className={`px-5 py-2.5 rounded-lg transition font-medium ${
                  activeTab === 'players' 
                    ? 'bg-gradient-to-r from-cyan-600 to-teal-600 shadow-lg shadow-cyan-600/50 border border-cyan-400/30' 
                    : 'bg-slate-800/50 border border-slate-700/50 hover:bg-slate-700/50 hover:border-cyan-600/30'
                }`}
              >
                Игроки
              </button>
              
              <div className="w-px h-8 bg-slate-700/50 mx-2"></div>
              
              {!isAdmin ? (
                <button
                  onClick={() => setLoginAttempt(true)}
                  className="flex items-center gap-2 px-5 py-2.5 rounded-lg bg-gradient-to-r from-slate-700 to-slate-600 hover:from-slate-600 hover:to-slate-500 transition border border-slate-600/50 font-medium"
                >
                  <Lock size={16} />
                  Админ
                </button>
              ) : (
                <button
                  onClick={handleAdminLogout}
                  className="px-5 py-2.5 rounded-lg bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 shadow-lg shadow-red-600/50 border border-red-400/30 transition font-medium"
                >
                  Выход
                </button>
              )}
            </nav>
          </div>

          {menuOpen && (
            <nav className="md:hidden mt-4 flex flex-col gap-2">
              <button
                onClick={() => { setActiveTab('demons'); setMenuOpen(false); }}
                className="px-4 py-3 rounded-lg bg-gradient-to-r from-blue-600 to-cyan-600 text-left border border-blue-400/30"
              >
                Демоны
              </button>
              <button
                onClick={() => { setActiveTab('challenges'); setMenuOpen(false); }}
                className="px-4 py-3 rounded-lg bg-gradient-to-r from-purple-600 to-pink-600 text-left border border-purple-400/30"
              >
                Челленджи
              </button>
              <button
                onClick={() => { setActiveTab('players'); setMenuOpen(false); }}
                className="px-4 py-3 rounded-lg bg-gradient-to-r from-cyan-600 to-teal-600 text-left border border-cyan-400/30"
              >
                Игроки
              </button>
              {!isAdmin ? (
                <button
                  onClick={() => setLoginAttempt(true)}
                  className="px-4 py-3 rounded-lg bg-slate-700 text-left border border-slate-600/50"
                >
                  <Lock size={16} className="inline mr-2" />
                  Админ-панель
                </button>
              ) : (
                <button
                  onClick={handleAdminLogout}
                  className="px-4 py-3 rounded-lg bg-red-600 text-left border border-red-400/30"
                >
                  Выйти из админки
                </button>
              )}
            </nav>
          )}
        </div>
      </header>

      {/* Admin Login Modal */}
      {loginAttempt && !isAdmin && (
        <div 
          className="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50"
          onClick={() => setLoginAttempt(false)}
        >
          <div 
            className="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl max-w-md w-full p-8 border border-cyan-700/30 shadow-2xl"
            onClick={(e) => e.stopPropagation()}
          >
            <div className="text-center mb-6">
              <div className="w-16 h-16 bg-gradient-to-br from-cyan-600 to-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg shadow-cyan-600/50">
                <Lock size={32} />
              </div>
              <h3 className="text-2xl font-bold mb-2">Админ-панель</h3>
              <p className="text-slate-400 text-sm">Доступ только для @foxplay0707</p>
            </div>
            
            <div className="space-y-4">
              <input
                type="email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                placeholder="Введите email"
                className="w-full px-4 py-3 bg-slate-900/50 border border-slate-700 rounded-lg focus:outline-none focus:border-cyan-500 transition"
                onKeyPress={(e) => e.key === 'Enter' && handleAdminLogin()}
              />
              
              <div className="flex gap-3">
                <button
                  onClick={() => setLoginAttempt(false)}
                  className="flex-1 px-4 py-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition border border-slate-600"
                >
                  Отмена
                </button>
                <button
                  onClick={handleAdminLogin}
                  className="flex-1 px-4 py-3 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 rounded-lg transition shadow-lg shadow-cyan-600/30 border border-cyan-400/30 font-medium"
                >
                  Войти
                </button>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* Admin Controls */}
      {isAdmin && (
        <div className="relative bg-gradient-to-r from-red-900/30 via-red-800/30 to-red-900/30 border-b border-red-600/30 backdrop-blur-sm">
          <div className="container mx-auto px-4 py-3">
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-3">
                <div className="w-2.5 h-2.5 bg-red-500 rounded-full animate-pulse shadow-lg shadow-red-500/50"></div>
                <span className="text-sm font-semibold text-red-300">Режим администратора</span>
                <span className="text-xs text-red-400/70">(@foxplay0707)</span>
              </div>
              <button
                onClick={saveData}
                className="flex items-center gap-2 px-5 py-2 bg-gradient-to-r from-green-600 to-green-700 hover:from-green-500 hover:to-green-600 rounded-lg transition shadow-lg shadow-green-600/30 border border-green-400/30 font-medium"
              >
                <Save size={16} />
                Сохранить
              </button>
            </div>
          </div>
        </div>
      )}

      {/* Main Content */}
      <main className="relative container mx-auto px-4 py-8">
        {/* Demons List */}
        {activeTab === 'demons' && (
          <div>
            <div className="flex items-center justify-between mb-8">
              <div>
                <h2 className="text-4xl font-bold bg-gradient-to-r from-cyan-300 to-blue-400 bg-clip-text text-transparent">Список демонов</h2>
                <p className="text-slate-400 mt-1">Самые сложные уровни Rune GDPS</p>
              </div>
              {isAdmin && (
                <button
                  onClick={() => {
                    const newId = `D${String(demons.length + 1).padStart(3, '0')}`;
                    const newDemon = {
                      id: newId,
                      name: 'Новый демон',
                      creator: 'Creator',
                      position: demons.length + 1,
                      cover: 'https://images.unsplash.com/photo-1614730321146-b6fa6a46bcb4?w=400',
                      video: 'https://youtube.com/watch?v='
                    };
                    setDemons([...demons, newDemon]);
                  }}
                  className="flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 rounded-lg transition shadow-lg shadow-blue-600/30 border border-blue-400/30 font-medium"
                >
                  <Plus size={18} />
                  Добавить
                </button>
              )}
            </div>

            <div className="grid gap-4">
              {demons.map((demon, index) => (
                <div
                  key={demon.id}
                  className="bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-sm rounded-2xl border border-cyan-700/30 overflow-hidden hover:border-cyan-500/50 transition-all hover:shadow-xl hover:shadow-cyan-900/30 group"
                >
                  <div className="flex flex-col md:flex-row">
                    <div className="relative w-full md:w-56 h-56 md:h-auto overflow-hidden">
                      <img
                        src={demon.cover}
                        alt={demon.name}
                        className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                      />
                      <div className="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                      <div className="absolute top-3 left-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white px-4 py-1.5 rounded-full font-bold shadow-lg border border-blue-400/30">
                        #{demon.position}
                      </div>
                      <div className="absolute bottom-3 left-3 bg-slate-900/90 backdrop-blur-sm text-cyan-300 px-3 py-1 rounded-lg text-xs font-mono border border-cyan-700/30">
                        ID: {demon.id}
                      </div>
                    </div>
                    
                    <div className="flex-1 p-5 flex flex-col justify-between">
                      <div>
                        {isAdmin ? (
                          <div className="space-y-3">
                            <input
                              value={demon.id}
                              onChange={(e) => {
                                const updated = [...demons];
                                updated[index].id = e.target.value;
                                setDemons(updated);
                              }}
                              className="text-xs font-mono bg-slate-900/50 border border-slate-700 px-3 py-1.5 rounded-lg w-32"
                              placeholder="ID"
                            />
                            <input
                              value={demon.name}
                              onChange={(e) => {
                                const updated = [...demons];
                                updated[index].name = e.target.value;
                                setDemons(updated);
                              }}
                              className="text-2xl font-bold bg-slate-900/50 border border-slate-700 px-3 py-2 rounded-lg w-full"
                            />
                            <input
                              value={demon.creator}
                              onChange={(e) => {
                                const updated = [...demons];
                                updated[index].creator = e.target.value;
                                setDemons(updated);
                              }}
                              className="text-sm text-cyan-300 bg-slate-900/50 border border-slate-700 px-3 py-2 rounded-lg w-full"
                              placeholder="Создатель"
                            />
                            <input
                              value={demon.cover}
                              onChange={(e) => {
                                const updated = [...demons];
                                updated[index].cover = e.target.value;
                                setDemons(updated);
                              }}
                              className="text-xs bg-slate-900/50 border border-slate-700 px-3 py-1.5 rounded-lg w-full"
                              placeholder="URL обложки"
                            />
                            <input
                              value={demon.video}
                              onChange={(e) => {
                                const updated = [...demons];
                                updated[index].video = e.target.value;
                                setDemons(updated);
                              }}
                              className="text-xs bg-slate-900/50 border border-slate-700 px-3 py-1.5 rounded-lg w-full"
                              placeholder="YouTube ссылка"
                            />
                          </div>
                        ) : (
                          <>
                            <h3 className="text-2xl font-bold mb-2 bg-gradient-to-r from-white to-cyan-300 bg-clip-text text-transparent">{demon.name}</h3>
                            <p className="text-sm text-cyan-400 mb-1">by {demon.creator}</p>
                            <p className="text-xs text-slate-500 font-mono">ID: {demon.id}</p>
                          </>
                        )}
                      </div>

                      <div className="flex gap-2 mt-4">
                        {!isAdmin ? (
                          <button
                            onClick={() => setSelectedItem(demon)}
                            className="flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-500 hover:to-cyan-500 rounded-lg transition shadow-lg shadow-blue-600/30 border border-blue-400/30 font-medium"
                          >
                            <Play size={16} />
                            Смотреть
                          </button>
                        ) : (
                          <>
                            <button
                              onClick={() => moveItem(demons, setDemons, index, 'up')}
                              disabled={index === 0}
                              className="p-2.5 bg-slate-700/50 hover:bg-slate-600/50 border border-slate-600 rounded-lg transition disabled:opacity-30"
                            >
                              <MoveUp size={18} />
                            </button>
                            <button
                              onClick={() => moveItem(demons, setDemons, index, 'down')}
                              disabled={index === demons.length - 1}
                              className="p-2.5 bg-slate-700/50 hover:bg-slate-600/50 border border-slate-600 rounded-lg transition disabled:opacity-30"
                            >
                              <MoveDown size={18} />
                            </button>
                            <button
                              onClick={() => deleteItem(demons, setDemons, demon.id)}
                              className="p-2.5 bg-red-600/80 hover:bg-red-600 border border-red-500/50 rounded-lg transition ml-auto"
                            >
                              <Trash2 size={18} />
                            </button>
                          </>
                        )}
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        )}

        {/* Challenges List */}
        {activeTab === 'challenges' && (
          <div>
            <div className="flex items-center justify-between mb-8">
              <div>
                <h2 className="text-4xl font-bold bg-gradient-to-r from-purple-300 to-pink-400 bg-clip-text text-transparent">Список челленджей</h2>
                <p className="text-slate-400 mt-1">Самые сложные испытания Rune GDPS</p>
              </div>
              {isAdmin && (
                <button
                  onClick={() => {
                    const newId = `C${String(challenges.length + 1).padStart(3, '0')}`;
                    const newChallenge = {
                      id: newId,
                      name: 'Новый челлендж',
                      creator: 'Creator',
                      position: challenges.length + 1,
                      cover: 'https://images.unsplash.com/photo-1511512578047-dfb367046420?w=400',
                      video: 'https://youtube.com/watch?v='
                    };
                    setChallenges([...challenges, newChallenge]);
                  }}
                  className="flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-lg transition shadow-lg shadow-purple-600/30 border border-purple-400/30 font-medium"
                >
                  <Plus size={18} />
                  Добавить
                </button>
              )}
            </div>

            <div className="grid gap-4">
              {challenges.map((challenge, index) => (
                <div
                  key={challenge.id}
                  className="bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-sm rounded-2xl border border-purple-700/30 overflow-hidden hover:border-purple-500/50 transition-all hover:shadow-xl hover:shadow-purple-900/30 group"
                >
                  <div className="flex flex-col md:flex-row">
                    <div className="relative w-full md:w-56 h-56 md:h-auto overflow-hidden">
                      <img
                        src={challenge.cover}
                        alt={challenge.name}
                        className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
                      />
                      <div className="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                      <div className="absolute top-3 left-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-1.5 rounded-full font-bold shadow-lg border border-purple-400/30">
                        #{challenge.position}
                      </div>
                      <div className="absolute bottom-3 left-3 bg-slate-900/90 backdrop-blur-sm text-purple-300 px-3 py-1 rounded-lg text-xs font-mono border border-purple-700/30">
                        ID: {challenge.id}
                      </div>
                    </div>
                    
                    <div className="flex-1 p-5 flex flex-col justify-between">
                      <div>
                        {isAdmin ? (
                          <div className="space-y-3">
                            <input
                              value={challenge.id}
                              onChange={(e) => {
                                const updated = [...challenges];
                                updated[index].id = e.target.value;
                                setChallenges(updated);
                              }}
                              className="text-xs font-mono bg-slate-900/50 border border-slate-700 px-3 py-1.5 rounded-lg w-32"
                              placeholder="ID"
                            />
                            <input
                              value={challenge.name}
                              onChange={(e) => {
                                const updated = [...challenges];
                                updated[index].name = e.target.value;
                                setChallenges(updated);
                              }}
                              className="text-2xl font-bold bg-slate-900/50 border border-slate-700 px-3 py-2 rounded-lg w-full"
                            />
                            <input
                              value={challenge.creator}
                              onChange={(e) => {
                                const updated = [...challenges];
                                updated[index].creator = e.target.value;
                                setChallenges(updated);
                              }}
                              className="text-sm text-purple-300 bg-slate-900/50 border border-slate-700 px-3 py-2 rounded-lg w-full"
                              placeholder="Создатель"
                            />
                            <input
                              value={challenge.cover}
                              onChange={(e) => {
                                const updated = [...challenges];
                                updated[index].cover = e.target.value;
                                setChallenges(updated);
                              }}
                              className="text-xs bg-slate-900/50 border border-slate-700 px-3 py-1.5 rounded-lg w-full"
                              placeholder="URL обложки"
                            />
                            <input
                              value={challenge.video}
                              onChange={(e) => {
                                const updated = [...challenges];
                                updated[index].video = e.target.value;
                                setChallenges(updated);
                              }}
                              className="text-xs bg-slate-900/50 border border-slate-700 px-3 py-1.5 rounded-lg w-full"
                              placeholder="YouTube ссылка"
                            />
                          </div>
                        ) : (
                          <>
                            <h3 className="text-2xl font-bold mb-2 bg-gradient-to-r from-white to-purple-300 bg-clip-text text-transparent">{challenge.name}</h3>
                            <p className="text-sm text-purple-400 mb-1">by {challenge.creator}</p>
                            <p className="text-xs text-slate-500 font-mono">ID: {challenge.id}</p>
                          </>
                        )}
                      </div>

                      <div className="flex gap-2 mt-4">
                        {!isAdmin ? (
                          <button
                            onClick={() => setSelectedItem(challenge)}
                            className="flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 rounded-lg transition shadow-lg shadow-purple-600/30 border border-purple-400/30 font-medium"
                          >
                            <Play size={16} />
                            Смотреть
                          </button>
                        ) : (
                          <>
                            <button
                              onClick={() => moveItem(challenges, setChallenges, index, 'up')}
                              disabled={index === 0}
                              className="p-2.5 bg-slate-700/50 hover:bg-slate-600/50 border border-slate-600 rounded-lg transition disabled:opacity-30"
                            >
                              <MoveUp size={18} />
                            </button>
                            <button
                              onClick={() => moveItem(challenges, setChallenges, index, 'down')}
                              disabled={index === challenges.length - 1}
                              className="p-2.5 bg-slate-700/50 hover:bg-slate-600/50 border border-slate-600 rounded-lg transition disabled:opacity-30"
                            >
                              <MoveDown size={18} />
                            </button>
                            <button
                              onClick={() => deleteItem(challenges, setChallenges, challenge.id)}
                              className="p-2.5 bg-red-600/80 hover:bg-red-600 border border-red-500/50 rounded-lg transition ml-auto"
                            >
                              <Trash2 size={18} />
                            </button>
                          </>
                        )}
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </div>
        )}

        {/* Players List */}
        {activeTab === 'players' && (
          <div>
            <div className="flex items-center justify-between mb-8">
              <div>
                <h2 className="text-4xl font-bold bg-gradient-to-r from-cyan-300 to-teal-400 bg-clip-text text-transparent">Топ игроков</h2>
                <p className="text-slate-400 mt-1">Лучшие игроки Rune GDPS</p>
              </div>
              {isAdmin && (
                <button
                  onClick={() => {
                    const newId = `P${String(players.length + 1).padStart(3, '0')}`;
                    const newPlayer = {
                      id: newId,
                      name: 'Новый игрок',
                      country: 'RU',
                      position: players.length + 1
                    };
                    setPlayers([...players, newPlayer]);
                  }}
                  className="flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-cyan-600 to-teal-600 hover:from-cyan-500 hover:to-teal-500 rounded-lg transition shadow-lg shadow-cyan-600/30 border border-cyan-400/30 font-medium"
                >
                  <Plus size={18} />
                  Добавить
                </button>
              )}
            </div>

            <div className="grid gap-4">
              {players.map((player, index) => (
                <div
                  key={player.id}
                  className="bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-sm rounded-2xl border border-cyan-700/30 p-5 hover:border-cyan-500/50 transition-all hover:shadow-xl hover:shadow-cyan-900/30"
                >
                  <div className="flex items-center justify-between">
                    <div className="flex items-center gap-5 flex-1">
                      <div className="relative">
                        <div className="w-16 h-16 bg-gradient-to-br from-cyan-600 to-blue-600 rounded-full flex items-center justify-center font-bold text-xl shadow-lg shadow-cyan-600/50 border-2 border-cyan-400/30">
                          #{player.position}
                        </div>
                        <div className="absolute -bottom-1 -right-1 bg-slate-900 rounded-full px-2 py-0.5 text-xs font-mono border border-cyan-700/50">
                          {player.id}
                        </div>
                      </div>
                      
                      <div className="flex-1">
                        {isAdmin ? (
                          <div className="space-y-2">
                            <input
                              value={player.id}
                              onChange={(e) => {
                                const updated = [...players];
                                updated[index].id = e.target.value;
                                setPlayers(updated);
                              }}
                              className="text-xs font-mono bg-slate-900/50 border border-slate-700 px-3 py-1.5 rounded-lg w-28"
                              placeholder="ID"
                            />
                            <input
                              value={player.name}
                              onChange={(e) => {
                                const updated = [...players];
                                updated[index].name = e.target.value;
                                setPlayers(updated);
                              }}
                              className="text-xl font-bold bg-slate-900/50 border border-slate-700 px-3 py-2 rounded-lg w-full"
                            />
                            <input
                              value={player.country}
                              onChange={(e) => {
                                const updated = [...players];
                                updated[index].country = e.target.value.toUpperCase();
                                setPlayers(updated);
                              }}
                              className="text-sm bg-slate-900/50 border border-slate-700 px-3 py-2 rounded-lg w-24 uppercase"
                              placeholder="RU"
                              maxLength={2}
                            />
                          </div>
                        ) : (
                          <>
                            <h3 className="text-xl font-bold bg-gradient-to-r from-white to-cyan-300 bg-clip-text text-transparent">{player.name}</h3>
                            <div className="flex items-center gap-2 mt-1">
                              <span className="text-sm px-2.5 py-0.5 bg-cyan-900/30 border border-cyan-700/50 rounded-full text-cyan-300 font-medium">
                                {player.country}
                              </span>
                              <span className="text-xs text-slate-500 font-mono">ID: {player.id}</span>
                            </div>
                          </>
                        )}
                      </div>

                      <div className="flex items-center gap-3">
                        <Trophy className="text-yellow-400 drop-shadow-[0_0_8px_rgba(250,204,21,0.5)]" size={28} />
                      </div>
                    </div>

                    {isAdmin && (
                      <div className="flex gap-2 ml-4">
                        <button
                          onClick={() => moveItem(players, setPlayers, index, 'up')}
                          disabled={index === 0}
                          className="p-2.5 bg-slate-700/50 hover:bg-slate-600/50 border border-slate-600 rounded-lg transition disabled:opacity-30"
                        >
                          <MoveUp size={18} />
                        </button>
                        <button
                          onClick={() => moveItem(players, setPlayers, index, 'down')}
                          disabled={index === players.length - 1}
                          className="p-2.5 bg-slate-700/50 hover:bg-slate-600/50 border border-slate-600 rounded-lg transition disabled:opacity-30"
                        >
                          <MoveDown size={18} />
                        </button>
                        <button
                          onClick={() => deleteItem(players, setPlayers, player.id)}
                          className="p-2.5 bg-red-600/80 hover:bg-red-600 border border-red-500/50 rounded-lg transition"
                        >
                          <Trash2 size={18} />
                        </button>
                      </div>
                    )}
                  </div>
                </div>
              ))}
            </div>
          </div>
        )}
      </main>

      {/* Video Modal */}
      {selectedItem && (
        <div 
          className="fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center p-4 z-50 animate-in fade-in duration-200"
          onClick={() => setSelectedItem(null)}
        >
          <div 
            className="bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl max-w-5xl w-full overflow-hidden border border-cyan-700/30 shadow-2xl"
            onClick={(e) => e.stopPropagation()}
          >
            <div className="p-5 border-b border-cyan-700/30 flex items-center justify-between bg-slate-900/50">
              <div>
                <h3 className="text-2xl font-bold bg-gradient-to-r from-white to-cyan-300 bg-clip-text text-transparent">{selectedItem.name}</h3>
                <p className="text-sm text-cyan-400 mt-1">by {selectedItem.creator}</p>
              </div>
              <button
                onClick={() => setSelectedItem(null)}
                className="p-2.5 hover:bg-slate-700/50 border border-slate-700 rounded-lg transition"
              >
                <X size={24} />
              </button>
            </div>
            
            <div className="aspect-video bg-black">
              <iframe
                width="100%"
                height="100%"
                src={selectedItem.video.replace('watch?v=', 'embed/')}
                title={selectedItem.name}
                frameBorder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowFullScreen
                className="w-full h-full"
              ></iframe>
            </div>
            
            <div className="p-5 bg-slate-900/30 border-t border-cyan-700/30">
              <div className="flex items-center justify-between text-sm">
                <span className="text-slate-400">ID: <span className="font-mono text-cyan-400">{selectedItem.id}</span></span>
                <span className="text-slate-400">Позиция: <span className="font-bold text-cyan-400">#{selectedItem.position}</span></span>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* Footer */}
      <footer className="relative border-t border-cyan-800/30 backdrop-blur-md bg-slate-900/70 mt-16">
        <div className="container mx-auto px-4 py-8">
          <div className="flex flex-col md:flex-row items-center justify-between gap-4">
            <div className="flex items-center gap-3">
              <img 
                src="https://i.postimg.cc/nLgSgNJN/image.jpg" 
                alt="Rune GDPS" 
                className="w-10 h-10 rounded-full border border-cyan-400/30"
              />
              <div>
                <p className="text-sm font-semibold text-cyan-300">Rune GDPS Demonlist</p>
                <p className="text-xs text-slate-500">Не аффилирован с RobTopGamesAB ®</p>
              </div>
            </div>
            
            <div className="text-center text-sm text-slate-400">
              <p>© 2026 Rune GDPS. Все права защищены.</p>
            </div>
            
            <div className="flex gap-2">
              <div className="w-2 h-2 bg-cyan-500 rounded-full animate-pulse"></div>
              <div className="w-2 h-2 bg-blue-500 rounded-full animate-pulse delay-100"></div>
              <div className="w-2 h-2 bg-purple-500 rounded-full animate-pulse delay-200"></div>
            </div>
          </div>
        </div>
      </footer>
    </div>
  );
};

export default RuneDemonlist;
    </script>
</body>
</html>
```

